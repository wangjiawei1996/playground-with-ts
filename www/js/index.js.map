{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/core/generator.js","webpack:///./js/core/soduko.js","webpack:///./js/core/toolkit.js","webpack:///./js/index.js","webpack:///./js/ui/grid.js","webpack:///./js/ui/popupnumbers.js"],"names":["Toolkit","require","module","exports","internalGenerator","matrix","makeMatrix","orders","map","row","v","i","shuffle","n","fillNumber","fillRow","rowIndex","colIndex","checkFillable","Generator","generator","solutionMatrix","level","puzzleMatrix","Math","random","cell","matrixToolkit","makeRow","array","Array","fill","from","length","endIndex","j","floor","col","boxToolkit","convertToBoxIndex","boxIndex","box","getBoxCells","cellIndex","convertFromBoxIndex","startRowIndex","startColIndex","result","push","Grid","PopupNumbers","grid","$","build","layout","popupNumbers","bindPopup","on","rebuild","Sudoku","container","_$container","sudoku","make","rowGroupClasses","colGroupClasses","$cells","rowValues","cellValue","addClass","text","$divArray","$spanArray","append","width","height","css","empty","$cell","e","target","is","popup","$panel","_$panel","hide","removeClass","$span","_$targetCell","hasClass","position","left","top","show"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/index.js\");\n","// 生成数独解决方案的方法\nconst Toolkit = require('./toolkit')\nmodule.exports = class Generator {\n\n  generator () {\n    while (!this.internalGenerator()) {\n      // TODO\n      // console.warn('try again');\n    }\n  }\n\n  internalGenerator () {\n    this.matrix = Toolkit.matrix.makeMatrix();\n    this.orders = Toolkit.matrix.makeMatrix()\n      .map(row => row.map((v, i) => i))\n      .map(row => Toolkit.matrix.shuffle(row));\n\n    // Toolkit.matrix.makeRow()\n    for (let n = 1; n <= 9; n++) {\n      if (!this.fillNumber(n)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  fillNumber (n) {\n    return this.fillRow(n, 0);\n  }\n\n  fillRow (n, rowIndex) {\n    if (rowIndex > 8) {\n      return true;\n    }\n\n    const row = this.matrix[rowIndex];\n    // 随机选择列\n    const orders = this.orders[rowIndex];\n\n    for (let i = 0; i < 9; i++) {\n      const colIndex = orders[i];\n\n      // 如果该位置已经有值，则跳过\n      if (row[colIndex]) {\n        continue;\n      }\n\n      // 检查此位置是否可以填 n （!列和宫都存在）\n      if (!Toolkit.matrix.checkFillable(this.matrix, n, rowIndex, colIndex)) {\n        continue;\n      }\n\n      row[colIndex] = n;\n      // 当前行填写 n 成功，递归调用 fillRow() 在下一行中填写 n\n      // 去下一行填写 n，如果没填进去，就继续寻找当前行的下一个位置\n      if (!this.fillRow(n, rowIndex + 1)) {\n        row[colIndex] = 0;\n        continue;\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n};","// 生成数独游戏\nconst Generator = require('./generator')\nmodule.exports = class Sudoku {\n  constructor() {\n    const generator = new Generator();\n    generator.generator();\n    this.solutionMatrix = generator.matrix;\n  }\n  make(level = 5) {\n    this.puzzleMatrix = this.solutionMatrix.map(row => {\n      return row.map(cell => Math.random()* 9 < level ? 0 : cell)\n    })\n  }\n}","const matrixToolkit = {\n  makeRow (v = 0) {\n    const array = new Array(9);\n    array.fill(v);\n    return array;\n  },\n  \n  makeMatrix (v = 0) {\n    return Array.from({length: 9}, () => this.makeRow(v));\n  },\n  \n  /**\n   * Fisher-Yates 洗牌算法\n   * 对传入数组进行随机排序，然后返回新数组\n   * @param {*} array\n   */\n  shuffle (array) {\n    const endIndex = array.length - 2;\n    for (let i = 0; i <= endIndex; i++) {\n      const j = i + Math.floor(Math.random() * (array.length - i));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  },\n\n  /**\n   * TODO 检查指定位置可以填写数字 n\n  */\n  checkFillable (matrix, n, rowIndex, colIndex) {\n    const row = matrix[rowIndex];\n    const col = this.makeRow().map((v, i) => matrix[i][colIndex]);\n    const {boxIndex} = boxToolkit.convertToBoxIndex(rowIndex, colIndex);\n    const box = boxToolkit.getBoxCells(matrix, boxIndex);\n\n    for (let i = 0; i < 9; i++) {\n      if (row[i] === n || col[i] === n || box[i] === n) {\n        return false;\n      }\n    }\n    return true;\n  }\n};\n\n/**\n * 宫坐标系工具\n*/\nconst boxToolkit = {\n  convertToBoxIndex (rowIndex, colIndex) {\n    return {\n      boxIndex: Math.floor(rowIndex / 3) * 3 + Math.floor(colIndex / 3),\n      cellIndex: rowIndex % 3 * 3 + colIndex % 3\n    }\n  },\n\n  convertFromBoxIndex (boxIndex, cellIndex) {\n    return {\n      rowIndex: Math.floor(boxIndex / 3) * 3 + Math.floor(cellIndex / 3),\n      colIndex: boxIndex % 3 * 3 + cellIndex % 3\n    }\n  },\n\n  getBoxCells (matrix, boxIndex) {\n    const startRowIndex = Math.floor(boxIndex / 3) * 3;\n    const startColIndex = boxIndex % 3 * 3;\n    const result = [];\n\n    for (let cellIndex = 0; cellIndex < 9; cellIndex++) {\n      const rowIndex = startRowIndex + Math.floor(cellIndex / 3);\n      const colIndex = startColIndex + cellIndex % 3;\n      result.push(matrix[rowIndex][colIndex]);\n    }\n    return result;\n  }\n}\n\n// 工具集\n\nmodule.exports = class Toolkit {\n  /**\n   * 矩阵和数据相关工具\n   */\n  static get matrix () {\n    return matrixToolkit;\n  }\n\n  /**\n   * 宫坐标系相关工具\n   */\n  static get box () {\n    return boxToolkit;\n  }\n};","const Grid = require('./ui/grid');\nconst PopupNumbers = require('./ui/popupnumbers');\n\nconst grid = new Grid($(\"#container\"));\ngrid.build(); \ngrid.layout();\n\nconst popupNumbers = new PopupNumbers($(\"#popupNumbers\"));\ngrid.bindPopup(popupNumbers);\n\n$(\"#check\").on(\"click\", e => {\n\n});\n$(\"#reset\").on(\"click\", e => {\n\n});\n$(\"#clear\").on(\"click\", e => {\n\n});\n$(\"#rebuild\").on(\"click\", e => {\n  grid.rebuild();\n});\n","// 生成九宫格\nconst Toolkit = require('../core/toolkit');\nconst Sudoku = require('../core/soduko')\nclass Grid {\n  constructor(container) {\n    this._$container = container;\n  }\n  build() {\n    // const generator = new Generator();\n    // generator.generator();\n    // const matrix = generator.matrix;\n    const sudoku = new Sudoku();\n    sudoku.make();\n    const matrix = sudoku.puzzleMatrix\n    const rowGroupClasses = [\"row_g_top\", \"row_g_middle\", \"row_g_bottom\"];\n    const colGroupClasses = [\"col_g_left\", \"col_g_center\", \"col_g_right\"];\n    const $cells = matrix.map(rowValues => rowValues.map((cellValue, colIndex) => {\n      return $(\"<span>\")\n        .addClass(colGroupClasses[colIndex % 3])\n        .addClass(cellValue ? \"fixed\" : \"empty\")\n        .text(cellValue);\n    }));\n    const $divArray = $cells.map(($spanArray, rowIndex) => {\n      return $(\"<div>\")\n        .addClass('row')\n        .addClass(rowGroupClasses[rowIndex % 3])\n        .append($spanArray)\n    });\n    this._$container.append($divArray);\n  }\n  layout() {\n    const width = $(\"span:first\", this._$container).width();\n    $(\"span\", this._$container)\n      .height(width)\n      .css({\n        \"line-height\": `${width}px`,\n        \"font-size\": width < 32 ? `${width / 2}px` : \"\"\n      });\n  }\n  rebuild() {\n    this._$container.empty();\n    this.build();\n    this.layout();\n  }\n  bindPopup(popupNumbers) {\n    this._$container.on(\"click\", \"span\", e => {\n        const $cell = $(e.target);\n        if ($cell.is('.fixed')) {\n          return;\n        }\n        popupNumbers.popup($cell);\n    })\n  }\n}\nmodule.exports = Grid;","// 处理弹出的操作面板\nmodule.exports = class PopupNumbers {\n  constructor ($panel) {\n    this._$panel = $panel.hide().removeClass('hidden');\n    this._$panel.on('click', 'span', e => {\n        const $span = $(e.target);\n        const $cell = this._$targetCell;\n    \n        // mark1，mark2 回填样式\n        if ($span.hasClass('mark1')) {\n            // 回填样式\n            if ($cell.hasClass('mark1')) {\n                $cell.removeClass('mark1')\n            } else {\n                $cell.removeClass('mark2')\n                    .addClass('mark1')\n            }\n        } else if ($span.hasClass('mark2')) {\n            // 回填样式\n            if ($cell.hasClass('mark2')) {\n                $cell.removeClass('mark2')\n            } else {\n                $cell.removeClass('mark1')\n                    .addClass('mark2')\n            }\n        } else if ($span.hasClass('empty')) {\n            // 取消数字填写， 取消mark\n            $cell.text(0).addClass('empty').removeClass('mark1 mark2');\n        } else {\n            // 1-9 会填数字\n            $cell.removeClass('empty').text($span.text());    \n        }\n\n        this.hide();\n\n    });\n  }\n  popup($cell) {\n    this._$targetCell = $cell;\n    const {left, top} = $cell.position();\n    this._$panel\n      .css({\n        left: `${left}px`,\n        top: `${top}px`\n      })\n      .show()\n  }\n  hide() {\n    this._$panel.hide();\n  }\n}"],"sourceRoot":""}